<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
	PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
	"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
	
<mapper namespace="mapper.member">

	<select id="selectAllMemberList" resultType="empDTO">
		select * from emp
	</select>
	
	<select id="selectByDeptNo" resultType="empDTO" parameterType="int">
		select * from emp
		where deptno = #{deptNo}
	</select>
	
	<select id="selectBySal" resultType="empDTO" parameterType="java.util.HashMap">
		SELECT * FROM emp
		<where>
			<if test="salMin !='' and salMin != null">
				and sal >= ${salMin}
			</if>
			<if test="salMax !='' and salMax != null">
		<![CDATA[
				and sal <= ${salMax}
		]]>
			</if>
		</where>
	</select>
	
	<select id="selectByName" resultType="empDTO" parameterType="String">
		SELECT * FROM emp
		WHERE lower(ename) like '%'||lower(#{name})||'%'
	</select>
	
	<select id="searchBySelect" resultType="empDTO" parameterType="java.util.HashMap">
		select * from emp
		<where>
			<if test="select == 'dept'">
				<if test="selMin !='' and selMin != null">
					and deptno >= ${selMin}
				</if>
				<if test="selMax !='' and selMax != null">
				<![CDATA[ and deptno <= ${selMax}]]>
				</if>
			</if>
			<if test="select == 'sal'">
				<if test="selMin !='' and selMin != null">
					and sal >= ${selMin}
				</if>
				<if test="selMax !='' and selMax != null">
				<![CDATA[ and sal <= ${selMax}]]>
				</if>
			</if>
		</where>
	</select>
	
	<select id="checkList" resultType="empDTO" parameterType="java.util.ArrayList">
		select * from emp
		where empno in
		<foreach item="empno" open="(" separator="," close=")" collection="list">
		 	#{empno}
		</foreach>
	</select>
	
</mapper>