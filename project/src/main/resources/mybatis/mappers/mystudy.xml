<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
	PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
	"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
	
<mapper namespace="mapper.mystudy">
		
<!-- 	메모 입력하기 -->
	<insert id="insertMemo" parameterType="memoDTO">
		<![CDATA[
		 insert into pre_memo(userkey, memo_idx, memo_title, memo_desc, memo_date )
		 values(#{userkey}, seq_memo.nextval, #{memo_title}, #{memo_desc}, sysdate)
		]]>      
	</insert>
	
<!-- 	메모 수정 전 조회 -->
	<select id="selectMemoByIdx" resultType="memoDTO" parameterType="int">
      <![CDATA[
         select * from pre_memo	
         where memo_idx = #{memo_idx}	 	
      ]]>
	</select>
		
<!-- 	메모 수정하기 -->
	<update id="updateMemo" parameterType="memoDTO">
		<![CDATA[
		 update pre_memo
		 set memo_title = #{memo_title}
		 	,memo_desc = #{memo_desc}
		 	where memo_idx = #{memo_idx}
		]]> 
	</update>

<!-- 	메모 삭제하기 -->
	<delete id="deleteMemo" parameterType="int">
		<![CDATA[
		delete from pre_memo
		where memo_idx = #{memo_idx}
		]]>
	</delete>
	
	
<!-- 메모 해당리스트 -->
	<select id="Paging_list" resultType="memoDTO" parameterType="memoDTO">
      <![CDATA[
		 SELECT * from(
		 select rownum rnum, tmp.* from ( 
		 select * from pre_memo
		 where userkey = #{userkey} 
		 order by memo_date desc) tmp
		)
		WHERE #{startIdx} <= rnum AND rnum <= #{endIdx}
		order by memo_date desc
      ]]>
	</select>
	
<!-- 메모 전체 목록 수-->
	<select id="Paging_allCnt" resultType="int">
      <![CDATA[
		select count(*) 
		from pre_memo
		where userkey = #{userkey}
      ]]>
	</select>



	
	
	
	
</mapper>